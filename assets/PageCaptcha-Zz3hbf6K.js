import{d as g,h as d,c as k,u as E,_ as y,r as h,o as n,a as l,b as _,e as v,w as m,f as T,t as D,F as $,i as w,n as S,j as b}from"./index-CfGYFt7J.js";import{a as A,B as F,I}from"./types-Dx0h93Aq.js";import{B as N}from"./BaseButton-u4Jafv-X.js";const P=g({name:"PageCaptcha",components:{BaseDescription:A,BaseButton:N,BaseTitle:F},setup(){const i=[[1,3,4,6],[2,5,4,6],[1,2,3,5,6]],f=["Выбери все изображения, где есть светофоры","Выбери все изображения с дорожными знаками","Выбери все изображения, где есть самокаты"],B=E(),a=d(0),e=d([]),u=d(!1),r=k(()=>{const t=[];for(let o=1;o<=9;o++)t.push({id:o,src:`/img/captcha/${a.value+1}/${o}.jpg`});return t}),p=t=>e.value.includes(t),c=t=>{u.value&&(u.value=!1),e.value.includes(t)?e.value=e.value.filter(o=>o!==t):e.value.push(t)},C=k(()=>e.value.length&&e.value.length===i[a.value].length&&e.value.every(t=>i[a.value].includes(t)));return{IconType:I,dynamicTiles:r,subtitles:f,step:a,showError:u,handleTileClick:c,checkSelectedTile:p,onCheckButtonClick:()=>{if(e.value.length)if(C.value)a.value<2?(a.value=a.value+1,e.value=[],u.value=!1):B.push({name:"complete",query:{quest:"captcha"}});else{u.value=!0;return}}}}}),V={class:"captcha"},z={class:"captcha__description"},j={class:"captcha__field"},q=["onClick"],M=["src"],X={key:0,class:"captcha__error"};function H(s,i,f,B,a,e){const u=h("BaseTitle"),r=h("BaseDescription"),p=h("BaseButton");return n(),l("div",V,[_(u,{class:"captcha__title",title:"Докажи, что ты человек",red:"",icon:s.IconType.HEAD},null,8,["icon"]),v("div",z,[_(r,null,{subtitle:m(()=>[T(D(s.subtitles[s.step]),1)]),default:m(()=>[v("div",j,[(n(!0),l($,null,w(s.dynamicTiles,c=>(n(),l("div",{key:c.id,class:S(["captcha__item",{__active:s.checkSelectedTile(c.id)}]),onClick:C=>s.handleTileClick(c.id)},[v("img",{class:"captcha__image",src:c.src,alt:"",width:"100",height:"100"},null,8,M)],10,q))),128))]),s.showError?(n(),l("div",X,"Выбор неверный, попробуй еще раз")):b("",!0)]),_:1})]),_(p,{class:"captcha__button",onClick:s.onCheckButtonClick},{default:m(()=>[T("Check")]),_:1},8,["onClick"])])}const K=y(P,[["render",H],["__scopeId","data-v-78445933"]]);export{K as default};
